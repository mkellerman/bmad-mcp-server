# Test Suite: Discovery Commands
# Validates all BMAD discovery and listing commands

test_suite: 'Discovery Command Tests'
description: 'Validate BMAD discovery commands (*list-agents, *list-workflows, *doctor, *help, etc.)'

config:
  llm_model: 'gpt-4.1'
  temperature: 0.1
  timeout: 30000
  judge_model: 'gpt-4.1'
  judge_threshold: 0.7

tests:
  - id: 'discovery-001'
    name: 'List all available agents'
    prompt: |
      You have access to a BMAD MCP tool.

      User request: "Show me all available BMAD agents"

      Call bmad with command "*list-agents" to list all available agents.

    expectations:
      - type: 'contains'
        value: 'agent'
        case_sensitive: false
        description: 'Should mention agents in the response'

      - type: 'response_length'
        min: 50
        max: 5000
        description: 'Should provide agent list information'

      - type: 'not_contains'
        value: 'error'
        case_sensitive: false
        description: 'Should not contain errors'

  - id: 'discovery-002'
    name: 'List all available workflows'
    prompt: |
      You have access to a BMAD MCP tool.

      User request: "What workflows are available in BMAD?"

      Call bmad with command "*list-workflows" to list available workflows.

    expectations:
      - type: 'contains'
        value: 'workflow'
        case_sensitive: false
        description: 'Should mention workflows'

      - type: 'response_length'
        min: 50
        max: 5000
        description: 'Should provide workflow information'

      - type: 'not_contains'
        value: 'error'
        case_sensitive: false
        description: 'Should not contain errors'

  - id: 'discovery-003'
    name: 'Show help information'
    prompt: |
      You have access to a BMAD MCP tool.

      User request: "How do I use the BMAD tool?"

      Call bmad with command "*help" to show usage information.

    expectations:
      - type: 'contains'
        value: 'command'
        case_sensitive: false
        description: 'Should explain commands'

      - type: 'response_length'
        min: 100
        max: 10000
        description: 'Should provide comprehensive help'

  - id: 'discovery-004'
    name: 'Run doctor diagnostics'
    prompt: |
      You have access to a BMAD MCP tool.

      User request: "Check the BMAD installation status"

      Call bmad with command "*doctor" to run diagnostics.

    expectations:
      - type: 'response_length'
        min: 50
        max: 10000
        description: 'Should provide diagnostic information'

      - type: 'not_contains'
        value: 'undefined'
        case_sensitive: false
        description: 'Should not have undefined values'

  - id: 'discovery-005'
    name: 'Export master manifest'
    prompt: |
      You have access to a BMAD MCP tool.

      User says: "Export the BMAD master manifest"

      Call bmad with command "*export-master-manifest"

    expectations:
      - type: 'response_length'
        min: 50
        max: 50000
        description: 'Should provide manifest data'

  - id: 'discovery-006'
    name: 'Empty command loads default agent'
    prompt: |
      You have access to a BMAD MCP tool.

      User request: "Start BMAD"

      Call bmad with empty command "" to load the default bmad-master agent.

    expectations:
      - type: 'contains'
        value: 'bmad-master'
        case_sensitive: false
        description: 'Should load bmad-master by default'

      - type: 'response_length'
        min: 50
        max: 5000
        description: 'Should load agent successfully'

      - type: 'not_contains'
        value: 'error'
        case_sensitive: false
        description: 'Should not contain errors'
